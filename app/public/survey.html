<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/2fd1e693d6.js" crossorigin="anonymous"></script>

    <title>Friend Finder</title>
</head>

<body>
    <div class="container p-3">
        <h1>Survey Questions</h1>
        <hr>
        <form class="survey" method="post">
            <h2>About You</h2>
            <div class="form-group" id="nameDiv">
                <label for="name">Name (Required) </label>
                <input type="text" class="form-control" id="name-input" placeholder="Enter your name">
            </div>
            <div class="form-group" id="imgDiv">
                <label for="imgLink">Link to Photo Image (Required) </label>
                <input type="url" class="form-control" id="img-link">
            </div>
            <hr>
            <!-- Question 1  -->
            <div class="questionsDiv">
                <div class="form-group">
                    <label for="Question 1" id="q1Div">
                        Question 1: Your mind is always buzzing with unexplored ideas and plans.
                    </label>
                    <select class="form-control" id="Q1">
                        <option value="" selected>Choose...</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>
                <!-- Question 2  -->
                <div class="form-group">
                    <label for="Question 2" id="q2Div">
                        Question 2: Generally speaking, you rely more on your experience than your imagination.
                    </label>
                    <select class="form-control test" id="Q2">
                        <option value="" selected>Choose...</option>
                        <option value="1">1(Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5(Strongly Agree)</option>
                    </select>
                </div>
            </div>

            <input class="btn btn-primary" type="submit" value="Submit" id="submitBtn">

        </form>
        <hr>
        <footer>
            <a href="/api/friends">API Friends List</a> | <a href="https://github.com/anicng/FriendFinder"> GitHub
                Repo</a>
        </footer>
    </div>

    <script>

        $("#submitBtn").on('click', function (e) {
            e.preventDefault();

            var newFriend = {
                name: $("#name-input").val().trim(),
                image: $("#img-link").val().trim(),
                score: [
                    $('#Q1').val(),
                    $('#Q2').val()
                ]
            };

            $('#name-input').val("");
            $('#img-link').val("");
            $('#Q1').val("");
            $('#Q2').val("");

            $.post("/api/friends", newFriend)
                .then(function (data) {
                    console.log(data);
                    console.log("survey.html", data);
                });
            // }
        })


    </script>
</body>

</html>